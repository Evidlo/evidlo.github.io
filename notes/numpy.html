<!DOCTYPE html>
<html lang="en">

<head>
    <title>Numpy/Pytorch/Matplotlib Notes</title>
    <meta name="viewport" content="width=device-width"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="/styles.css" /> 
    <link rel="stylesheet" type="text/css" href="/codehilite.css" /> 
    <link rel="alternate" type="application/rss+xml" href="/rss.html" title="RSS feed">
</head>
<body>
    <main>
        
  <article>
    <header>
      <h1>Numpy/Pytorch/Matplotlib Notes</h1>
      <time datetime="2023-12-03">2023-12-03</time>
    </header>
    <h1 id="compute-dot-product-of-multidimensional-matrix-with-vector"><a class="toclink" href="#compute-dot-product-of-multidimensional-matrix-with-vector">Compute dot product of multidimensional matrix with vector</a></h1>
<p>Supposed we have an (N, N, N, 3) matrix representing the (X, Y, Z) coordinates of all voxels in a rectangular 3D grid.</p>
<p>In order to compute the dot product of each voxel coordinate with a vector, we can do:</p>
<pre class="codehilite"><code>vector = np.array((1, 0, 0))
np.tensordot(grid, vector, axes=1)
</code></pre>

<h1 id="update-xarray-dataarray-based-on-condition"><a class="toclink" href="#update-xarray-dataarray-based-on-condition">Update Xarray DataArray Based On Condition</a></h1>
<p>In numpy, you can do this</p>
<pre class="codehilite"><code>&gt;&gt;&gt; xxx[condition] = 123
</code></pre>

<p>This throws an error on Xarray DataArray</p>
<pre class="codehilite"><code>IndexError: Unlabeled multi-dimensional array cannot be used for indexing: x
</code></pre>

<p>Instead, do</p>
<pre class="codehilite"><code>&gt;&gt;&gt; xxx = xxx.where(~condition, 123)
</code></pre>

<h1 id="multiple-synced-animations"><a class="toclink" href="#multiple-synced-animations">Multiple Synced Animations</a></h1>
<p>To sync multiple animation on different subplots:</p>
<ol>
<li>Set all <code>aniXXX.event_source</code> to be the same.</li>
<li>Call <code>.save(..., extra_anim=[ani1, ani2, ..., ani(N-1)])</code> on the last animation</li>
</ol>
<pre class="codehilite"><code class="language-python">ax1 = plt.subplot(1, 2, 1)
ani = generate_animation(ax=ax1)

ax2 = plt.subplot(1, 2, 2)
ani2 = generate_other_animation(ax=ax2)
ani2.event_source = ani1.event_source
ani2.save('out.gif', fps=15, extra_anim=[ani1])
</code></pre>
  </article>

    </main>
<footer>
    <p>Evan Widloski - Rendered with <a href="https://github.com/evidlo/legoman">Legoman</a></p>
</footer>
</body>
</html>